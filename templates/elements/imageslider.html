<link rel="import" href="../../bower_components/polymer/polymer.html">
<dom-module id="image-slider">
    <style>

    </style>
    <template>
        <div id="controls">
            <div id="previous"></div>
            <div id="next"></div>
            <div id="indicators"></div>
        </div>
        <content id="content"></content>
    </template>
    <script>
		function onPreviousClicked(e) {
            e.preventDefault();
            e.stopPropagation();
            this.previous();
        }
        function onNextClicked(e) {
            e.preventDefault();
            e.stopPropagation();
            this.next();
        }
		
        Polymer({
            is: 'image-slider',
            properties: {
				controls: {
					type: Boolean,
					value: true
				},
				cycle: {
					type: Boolean,
					value: false
				},
				autoslide: {
					type: Number,
					value: 0
				},
				numItems: {
					type: Number,
					value: 0
				},
				selected: {
					type: Number,
					value: 0
				},
                data: {
					type: Array,
					value: [
						{
							imgsrc: "http://htmlstream.com/preview/unify-v1.8/assets/img/main/img1.jpg",
							desc: "Camera 1 - Farm"
						}, {
							imgsrc: "http://htmlstream.com/preview/unify-v1.8/assets/img/main/img2.jpg",
							desc: "Camera 2 - The Campsite"
						}
					]
				}
            },
            ready: function(){
				if (false === this.controls) {
                    this.$.controls.style.display = 'none';
                }
                this.numItems = this.children.length;
                for (var i = 0; i < this.numItems; i++) {
                    var bullet = document.createElement('span');
                    bullet.innerHTML = '&bull;';
                    this.$.indicators.appendChild(bullet);
                }
                if (0 !== this.numItems) {
                    if (this.selected < this.numItems) {
                        this.jumpTo(this.selected);
                    } else {
                        this.jumpTo(0);
                    }
                }
                if (0 !== this.autoslide) {
                    setInterval(this.next.bind(this), this.autoslide);
                }
                this.$.previous.addEventListener('click', onPreviousClicked.bind(this));
                this.$.next.addEventListener('click', onNextClicked.bind(this));
            },
			            /**
             * The `jumpTo` method will make the slider jump to the element at the provided index.
             *
             * @method jumpTo
             * @param {Number} index
             */
            jumpTo: function (index) {
                this.children[index].style.display = '';
                this.$.indicators.children[index].className = ' active';
                for (var i = 0; i < this.numItems; i++) {
                    if (i !== index) {
                        this.children[i].style.display = 'none';
                        this.$.indicators.children[i].className = ' ';
                    }
                }
                this.selected = index;
            },
            /**
             * The `next` method will make the slider jump to the next element. If there is no next element and the
             * slider has been configured to cycle, the slider will jump to the first element.
             *
             * @method next
             */
            next: function () {
                if (this.selected < this.numItems - 1) {
                    this.jumpTo(this.selected + 1);
                } else if (this.cycle && this.selected > 0) {
                    this.jumpTo(0);
                }
            },
            /**
             * The `previous` method will make the slider jump to the previous element. If there is no previous element
             * and the slider has been configured to cycle, the slider will jump to the last element.
             *
             * @method next
             */
            previous: function () {
                if (this.selected > 0) {
                    this.jumpTo(this.selected - 1);
                } else if (this.cycle && this.numItems > 1) {
                    this.jumpTo(this.numItems - 1);
                }
            }
        });
    </script>
</dom-module>

