<dom-module id="add-page">
    <style>
        .inputs h2{
            padding: 14px 0;
            font-size: 16px;
            font-weight: 400;
        }

        .inputs {
            width: 100%;
            padding: 15px;
        }

        .inputs textarea{

        }
    </style>
    <template>

        <iron-ajax id="add_data"
                   auto
                   handle-as="json"
                   method="POST"
                   on-response="handleResponse"
                   on-error="handleErrorResponse"
                   debounce-duration="300"></iron-ajax>

        <div class="row">
            <div class="col s10 offset-s1 card-panel">
                <div class="row">
                    <form class="col s12">
                        <div class="row center">
                            <h5>添加页面</h5>
                        </div>
                        <div class="row">
                            <div class="input-field col s12 m6">
                                <input id="title" type="text" class="validate">
                                <label for="title">页面名称</label>
                            </div>
                            <div class="input-field col s12 m6">
                                <input id="path" type="text" class="validate" value="{{path::input}}">
                                <label for="path">短链接 /pages/<span>{{path}}</span></label>
                            </div>
                            <div class="input-field col s12">
                                <textarea id="textarea1" class="materialize-textarea"></textarea>
                                <label for="textarea1">内容</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s12">
                                <a class="waves-effect waves-light btn">保存</a>
                                <a href="#/rabbit/dashboard" class="waves-effect waves-light btn grey">放弃</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'add-page',
            properties: {
                pageId: {
                    type: String,
                    value: ""
                },
                path: {
                    type: String,
                    notify: true
                }
            },
            handleResponse: function(data){
                this.page = data.detail.response;
                $('.slider').slider({height: 300});
            },
            handleErrorResponse: function(err){
                document.querySelector('app-router').go('/404');
            },
            attached: function(){
                this.$.add_data.url = "http://testbackend.elasticbeanstalk.com/v1/modules/";
                //this.$.add_data.url = "http://private-ac876-wujiutan.apiary-mock.com/pages/" + this.pageId;
                this.$.add_data.generateRequest();
            },
            ready: function(){
            }
        });
    </script>

</dom-module>